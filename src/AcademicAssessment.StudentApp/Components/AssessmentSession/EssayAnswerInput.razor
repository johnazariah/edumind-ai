<div class="essay-answer-input">
    <label class="form-label fw-semibold">Essay Response</label>
    <textarea class="form-control" rows="8" placeholder="@Placeholder" @oninput="HandleInput"
        disabled="@Disabled">@Value</textarea>
    <div class="form-text text-end">@WordCount words</div>
</div>

@code {
    [Parameter]
    public string Value { get; set; } = string.Empty;

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    [Parameter]
    public string Placeholder { get; set; } = "Write your response here";

    [Parameter]
    public bool Disabled { get; set; }

    private int WordCount => string.IsNullOrWhiteSpace(Value)
    ? 0
    : Value.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length;

    private Task HandleInput(ChangeEventArgs args)
    {
        if (Disabled)
        {
            return Task.CompletedTask;
        }

        var incoming = args.Value?.ToString() ?? string.Empty;
        Value = incoming;
        return ValueChanged.InvokeAsync(incoming);
    }
}